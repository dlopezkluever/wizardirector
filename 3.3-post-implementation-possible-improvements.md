Your revised plan is designed as a **single, vertically scrolling page** that uses a "progressive disclosure" UI. This satisfies your requirement for a single screen while ensuring the user follows the mandatory order of operations.

### Visual / UI Structure of Stage 5

The layout in `Stage5Assets.tsx` organizes the entire workflow into **three logical sections** on one page:

#### 1. The Top Section: Visual Style Selector

* **Purpose**: This is the mandatory "Gate 1".
* **Appearance**: A prominent selector or dropdown at the very top of the page.
* **Logic**: Until a style is selected and locked, everything below it is grayed out or disabled. This ensures you have the global style context needed for the extraction and generation prompts.

#### 2. The Middle Section: Extraction Trigger

* **Purpose**: To initiate the two-pass LLM scan of the Stage 4 script.
* **Appearance**: A large "Extract Characters, Props & Locations" button.
* **Logic**: This button only becomes active once the Visual Style is locked.

#### 3. The Bottom Section: Asset Review & Generation Grid

* **Purpose**: This section dynamically appears once the extraction is complete (`{hasExtracted && ...}`).
* **Appearance**: A categorized list (Characters, Locations, Props) using an `AssetCard` format.
* **"Check/Uncheck" Logic**:
* **Selection for Merging**: Each card has a checkbox. If you check exactly two assets, a "Merge" button appears at the top of this section to combine them.
* **Individual Generation**: Each card has its own "Generate Image Key" button, allowing you to iterate on assets one by one.
* **Batch Generation (Stretch)**: Your plan includes "Batch Operations" (like "Generate All Images") as a Phase 4 polish item, which would likely sit at the top of this section next to the "Merge" button.



### UI Breakdown Table

| Element | Visual Treatment | State Dependency |
| --- | --- | --- |
| **Step 1: Style Anchor** | Full-width selector at the top. | Mandatory; unlocks Step 2. |
| **Step 2: Scan Script** | Large action button with a progress loader. | Disabled until Step 1 is locked. |
| **Step 3: Asset Review** | A grid of Cards with checkboxes and edit buttons. | Hidden until Step 2 completes. |
| **Step 4: Gatekeeper** | A floating action bar at the very bottom of the screen. | Stays disabled until **all** assets have images and are locked. |

Element,Visual Treatment,State Dependency
Step 1: Style Anchor,Full-width selector at the top.,Mandatory; unlocks Step 2.
Step 2: Scan Script,Large action button with a progress loader.,Disabled until Step 1 is locked.
Step 3: Asset Review,A grid of Cards with checkboxes and edit buttons.,Hidden until Step 2 completes.
Step 4: Gatekeeper,A floating action bar at the very bottom of the screen.,Stays disabled until all assets have images and are locked.

### Summary of Screen Usage

* **Main Screen**: 100% of the work (Style selection, extraction, reviewing, editing, and generating) happens on the **Stage 5 main page**.
* **Secondary "Screens" (Modals)**: You would only see a small pop-up (dialog) for specific complex tasks like the **Merge Assets** tool or the **Add Custom Asset** form, which keeps the user in the same context.

Would you like me to provide the specific **Tailwind CSS classes** or **Shadcn UI component** structures for the "Merge" and "Batch" action bar?