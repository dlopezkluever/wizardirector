
### Feature 1.4: Stage 12 - Video Generation with Real Veo3 Integration âœ… **COMPLETE IMPLEMENTATION**

**Purpose**: Generate final videos using real Veo3 API with review and iteration workflow

**Database Requirements:**
- Create `videos` table linked to scenes and shots
- Implement job queue system for async video processing
- Add notification system for completion alerts

**Core Features:**
- [ ] **Veo3 API Integration**: Implement real video generation via Vertex AI
  - Submit confirmed start/end frames and formatted prompts to Veo3
  - Handle async video generation with webhook completion
  - Implement retry logic and error handling
  - Support 8-second shot specifications per pipeline design
- [ ] **Async Job System**: Build background video processing
  - Job queue implementation (Bull/similar)
  - Background worker process for long-running tasks
  - Job status tracking and progress monitoring
  - Email/in-app notifications on completion/failure
- [ ] **Stage 12 UI**: Build video review and iteration interface
  - Timeline-based video player with shot markers
  - Full scene assembly preview (multiple 8-second clips)
  - Issue classification controls (visual continuity, timing, dialogue/audio, narrative)
  - Playback controls (play/pause/scrub)
- [ ] **Iteration Routing**: Implement failure attribution and correction paths
  - Map issues to upstream stages (Stage 8 for visual issues, Stage 7 for narrative issues)
  - "Return to Stage X" actions with issue description capture
  - Success path: "Complete Scene" returns to Script Hub
- [ ] **Notification System**:
  - In-app toast notifications for render completion
  - Email alerts with project/scene context
  - Render re-entry logic (clicking notification drops user into Stage 12 review)
- [ ] **API Endpoints**:
  - `POST /api/projects/:projectId/scenes/:sceneId/generate-video` - Start video generation
  - `GET /api/projects/:projectId/scenes/:sceneId/video-status` - Check generation progress
  - `POST /api/projects/:projectId/scenes/:sceneId/video/:videoId/approve` - Approve video
  - `PUT /api/projects/:projectId/scenes/:sceneId/return-to-stage` - Route back for fixes
