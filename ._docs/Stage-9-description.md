Stage-9-Description



### **4.4 Stage 9: Prompt Segmentation (The Merger and Formatting)**

**Input:** Shot List Data (Stage 7\) + Asset Data (Stage 8). **Output:** Separated, editable **Frame Prompts** and **Video Prompts** for each shot.

**Prompt Type Separation:**

* **Frame Prompts:** Visually descriptive, asset-heavy, spatially explicit prompts for start/end frame generation
  - References Stage 8 visual states and shot-level camera/blocking
  - Auto-generated by LLM but **read-only by default** with optional manual edit toggle
  - Used exclusively for image generation (Stage 10)
* **Video Prompts:** Action and audio-focused prompts for video generation
  - Dialogue, accents, timing, and sound effects fully specified
  - Minimal visual description (assumes anchor frames encode visual truth)
  - **Always editable** and auto-generated by LLM
  - Used exclusively for video generation (Stage 12)
* **System Scaffolding Prompts:** Internal orchestration logic (not shown to users)
  - Hidden from user interface
  - Encodes intent and dependency rules for model coordination

**Veo3 Prompt Formatting Requirements (MANDATORY):**

The video prompt structure must adhere to Veo3's preferred format:

* **Visual Section:** `[Camera]`
   $$Character$$$$Action$$
  . [Style Capsule / Style Anchor injection - explicit design pillars and reference imagery adherence]
* **Audio Section:** `Audio: [SFX Cues]. Character [Name] speaks: "[Dialogue Line]"`

**User Interface Requirements:**

* **Shot-Based Prompt Inspector:** Expandable cards per shot showing both prompt types
* **Prompt Validation:** Length validation, forbidden character checking, preview component
* **Full User Editability:** Both Frame and Video prompts auto-generated but fully editable by users
* **Model Compatibility Tags:** Indicate start-frame-only vs start+end-frame requirements


## **9.4 Stage 9: Prompt Segmentation & Model Preparation**

### **Purpose**

Stage 9 deterministically assembles and exposes all prompts that will be sent to downstream models, separating them by function and model requirements.

### **Prompt Taxonomy**

Each shot produces a **Prompt Set** consisting of:

* **Frame Prompt(s):** Used for image generation (start frames &, if applicable, end frames)  
* **Video Prompt:** Used for video generation  
* **System Scaffold Prompt:** Hidden orchestration logic 

### **UI/UX Definition**

* **Shot-Based Prompt Inspector:** Expandable card per shot

**Frame Prompt Section:**

* Visually verbose  
* Includes asset references, spatial layout, camera, and starting state  
* Read-only by default with optional manual edit toggle

**Video Prompt Section:**

* Focused on action progression, dialogue, accents, SFX, and timing  
* Minimal visual description  
* Always editable

**Model Compatibility Tags:**

* Indicates whether the shot requires:  
  * Start frame only  
  * Start and end frames  
* Indicates compatible video models

### **Agentic Tooling**

* **Prompt Assembler Agent:** Deterministically creates prompt sets  
* **Prompt Sanity Checker:** Flags mismatches between prompt intent and model usage
